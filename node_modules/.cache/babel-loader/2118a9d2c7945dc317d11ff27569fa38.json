{"ast":null,"code":"var _jsxFileName = \"F:\\\\sunshine-full-project\\\\agustine-hotel--main\\\\src\\\\Components\\\\Dashboard\\\\Bookings.js\",\n    _s = $RefreshSig$();\n\nimport { useQuery } from \"@tanstack/react-query\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { Link } from \"react-router-dom\";\nimport { SyncLoader } from \"react-spinners\";\nimport { AuthContext } from \"../../Context/AuthContext/UserContext\";\nimport BookedRoomCard from \"./BookedRoomCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Bookings = () => {\n  _s();\n\n  const {\n    user,\n    logOut\n  } = useContext(AuthContext);\n  const {\n    data: bookedRomm = [],\n    isLoading,\n    refetch\n  } = useQuery({\n    queryKey: [\"bookedRoom\", user === null || user === void 0 ? void 0 : user.email],\n    queryFn: async () => {\n      const res = await fetch(`https://hotel-web-server.vercel.app/bookings?email=${user === null || user === void 0 ? void 0 : user.email}`, {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"Radission BluToken\")}`\n        }\n      });\n\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      } else {\n        const data = await res.json();\n        console.log(res);\n        return data;\n      }\n    }\n  });\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center m-80\",\n      children: /*#__PURE__*/_jsxDEV(SyncLoader, {\n        color: \"hsla(86, 0%, 100%, 1)\",\n        size: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n  const handleCancelBook = id => {\n    fetch(`https://hotel-web-server.vercel.app/orders/${id}`, {\n      method: \"DELETE\"\n    }).then(res => {\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      }\n\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      if (data.deletedCount > 0) toast.error(\"You successFully Canceled Your Book\");\n      refetch();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" text-center bg-gray-900 rounded-lg h-screen w-full z-0 drop-shadow-lg p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-3xl text-gray-200 font-bold my-4\",\n        children: \" Your Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), bookedRomm.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"You Have not any booked Room Yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Book a\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            className: \"underline\",\n            to: \"/rooms\",\n            children: \"Room?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: bookedRomm.map(booked => /*#__PURE__*/_jsxDEV(BookedRoomCard, {\n          booked: booked,\n          handleCancelBook: handleCancelBook\n        }, booked._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this))\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Bookings, \"WYY4rMUUWxT8yfVGN4Fs2rf5qiI=\", false, function () {\n  return [useQuery];\n});\n\n_c = Bookings;\nexport default Bookings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"names":["useQuery","React","useContext","useEffect","useState","toast","Link","SyncLoader","AuthContext","BookedRoomCard","Bookings","user","logOut","data","bookedRomm","isLoading","refetch","queryKey","email","queryFn","res","fetch","headers","authorization","localStorage","getItem","status","json","console","log","handleCancelBook","id","method","then","deletedCount","error","length","map","booked","_id"],"sources":["F:/sunshine-full-project/agustine-hotel--main/src/Components/Dashboard/Bookings.js"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { Link } from \"react-router-dom\";\nimport { SyncLoader } from \"react-spinners\";\nimport { AuthContext } from \"../../Context/AuthContext/UserContext\";\nimport BookedRoomCard from \"./BookedRoomCard\";\n\nconst Bookings = () => {\n  const { user, logOut } = useContext(AuthContext);\n\n  const {\n    data: bookedRomm = [],\n    isLoading,\n    refetch,\n  } = useQuery({\n    queryKey: [\"bookedRoom\", user?.email],\n    queryFn: async () => {\n      const res = await fetch(\n        `https://hotel-web-server.vercel.app/bookings?email=${user?.email}`,\n        {\n          headers: {\n            authorization: `bearer ${localStorage.getItem(\n              \"Radission BluToken\"\n            )}`,\n          },\n        }\n      );\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      } else {\n        const data = await res.json();\n\n        console.log(res);\n        return data;\n      }\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex justify-center m-80\">\n        <SyncLoader color=\"hsla(86, 0%, 100%, 1)\" size={15} />\n      </div>\n    );\n  }\n\n  const handleCancelBook = (id) => {\n    fetch(`https://hotel-web-server.vercel.app/orders/${id}`, {\n      method: \"DELETE\",\n    })\n      .then((res) => {\n        if (res.status === 401 || res.status === 403) {\n          return logOut();\n        }\n        return res.json();\n      })\n      .then((data) => {\n        console.log(data);\n        if (data.deletedCount > 0)\n          toast.error(\"You successFully Canceled Your Book\");\n        refetch();\n      });\n  };\n\n  return (\n    <div>\n      <div className=\" text-center bg-gray-900 rounded-lg h-screen w-full z-0 drop-shadow-lg p-5\">\n        <h3 className=\"text-3xl text-gray-200 font-bold my-4\"> Your Booking</h3>\n        {bookedRomm.length === 0 ? (\n          <div className=\"text-center\">\n            <h1>You Have not any booked Room Yet.</h1>\n            <p>\n              Book a{\" \"}\n              <Link className=\"underline\" to=\"/rooms\">\n                Room?\n              </Link>\n            </p>\n          </div>\n        ) : (\n          <>\n            {bookedRomm.map((booked) => (\n              <BookedRoomCard\n                key={booked._id}\n                booked={booked}\n                handleCancelBook={handleCancelBook}\n              ></BookedRoomCard>\n            ))}\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Bookings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}