{"ast":null,"code":"import _regeneratorRuntime from\"F:/sunshine-full-project/agustine-hotel--main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/sunshine-full-project/agustine-hotel--main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useQuery}from\"@tanstack/react-query\";import React from\"react\";import toast from\"react-hot-toast\";import LoadingAnimation from\"../Shared/LoadingAnimation/LoadingAnimation\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Allusers=function Allusers(){var _useQuery=useQuery({queryKey:[\"users\"],queryFn:function(){var _queryFn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://hotel-web-server.vercel.app/user\",{headers:{authorization:\"bearer \".concat(localStorage.getItem(\"Radission BluToken\"))}});case 2:res=_context.sent;data=res.json();return _context.abrupt(\"return\",data);case 5:case\"end\":return _context.stop();}}},_callee);}));function queryFn(){return _queryFn.apply(this,arguments);}return queryFn;}()}),_useQuery$data=_useQuery.data,users=_useQuery$data===void 0?[]:_useQuery$data,isLoading=_useQuery.isLoading,refetch=_useQuery.refetch;if(isLoading){return/*#__PURE__*/_jsx(LoadingAnimation,{});}var handleMakeAdmin=function handleMakeAdmin(id){fetch(\"https://hotel-web-server.vercel.app/user/admin/\".concat(id),{method:\"PUT\",headers:{\"content-type\":\"application/json\",authorization:\"bearer \".concat(localStorage.getItem(\"Radission BluToken\"))}}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.modifiedCount>0){toast.success(\"SuccessFully Made Admin\");refetch();}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-full my-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center text-xl text-white font-semibold\",children:[\"All Users\",\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-5\",children:users.map(function(user,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex  relative py-4 items-center mx-auto rounded-lg  gap-5 px-8 bg-white my-3 text-slate-800 font-semibold w-full md:w-[500px]\",children:[/*#__PURE__*/_jsx(\"p\",{children:i+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex md:flex-row gap-2 flex-col\",children:[/*#__PURE__*/_jsx(\"p\",{children:user.name}),/*#__PURE__*/_jsx(\"p\",{children:user.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown absolute right-4 dropdown-end\",children:[/*#__PURE__*/_jsx(\"label\",{tabIndex:0,className:\" m-1\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z\"})})}),/*#__PURE__*/_jsxs(\"ul\",{tabIndex:0,className:\"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleMakeAdmin(user._id);},className:\"text-white\",children:user.role===\"admin\"?\"Admin\":\"Make Admin\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"text-white\",children:\"Make Moderator\"})})]})]})]})},user._id);})})]});};export default Allusers;","map":{"version":3,"names":["useQuery","React","toast","LoadingAnimation","Allusers","queryKey","queryFn","fetch","headers","authorization","localStorage","getItem","res","data","json","users","isLoading","refetch","handleMakeAdmin","id","method","then","console","log","modifiedCount","success","map","user","i","name","email","_id","role"],"sources":["F:/sunshine-full-project/agustine-hotel--main/src/Components/Dashboard/Allusers.js"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\";\nimport React from \"react\";\nimport toast from \"react-hot-toast\";\nimport LoadingAnimation from \"../Shared/LoadingAnimation/LoadingAnimation\";\n\nconst Allusers = () => {\n  const {\n    data: users = [],\n    isLoading,\n    refetch,\n  } = useQuery({\n    queryKey: [\"users\"],\n    queryFn: async () => {\n      const res = await fetch(\"https://hotel-web-server.vercel.app/user\", {\n        headers: {\n          authorization: `bearer ${localStorage.getItem(\"Radission BluToken\")}`,\n        },\n      });\n      const data = res.json();\n      return data;\n    },\n  });\n\n  if (isLoading) {\n    return <LoadingAnimation></LoadingAnimation>;\n  }\n\n  const handleMakeAdmin = (id) => {\n    fetch(`https://hotel-web-server.vercel.app/user/admin/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"content-type\": \"application/json\",\n        authorization: `bearer ${localStorage.getItem(\"Radission BluToken\")}`,\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        if (data.modifiedCount > 0) {\n          toast.success(\"SuccessFully Made Admin\");\n          refetch();\n        }\n      });\n  };\n\n  return (\n    <div className=\"h-screen w-full my-4\">\n      <h1 className=\"text-center text-xl text-white font-semibold\">\n        All Users{\" \"}\n      </h1>\n      <div className=\"px-5\">\n        {users.map((user, i) => (\n          <div key={user._id}>\n            <div className=\"flex  relative py-4 items-center mx-auto rounded-lg  gap-5 px-8 bg-white my-3 text-slate-800 font-semibold w-full md:w-[500px]\">\n              <p>{i + 1}</p>\n              <div className=\"flex md:flex-row gap-2 flex-col\">\n                <p>{user.name}</p>\n                <p>{user.email}</p>\n              </div>\n              <div className=\"dropdown absolute right-4 dropdown-end\">\n                <label tabIndex={0} className=\" m-1\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    strokeWidth={1.5}\n                    stroke=\"currentColor\"\n                    className=\"w-6 h-6\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      d=\"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z\"\n                    />\n                  </svg>\n                </label>\n                <ul\n                  tabIndex={0}\n                  className=\"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52\"\n                >\n                  <li>\n                    <button\n                      onClick={() => handleMakeAdmin(user._id)}\n                      className=\"text-white\"\n                    >\n                      {user.role === \"admin\" ? \"Admin\" : \"Make Admin\"}\n                    </button>\n                  </li>\n                  <li>\n                    <button className=\"text-white\">Make Moderator</button>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Allusers;\n"],"mappings":"sRAAA,OAASA,QAAT,KAAyB,uBAAzB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,iBAAlB,CACA,MAAOC,iBAAP,KAA6B,6CAA7B,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,cAIIJ,QAAQ,CAAC,CACXK,QAAQ,CAAE,CAAC,OAAD,CADC,CAEXC,OAAO,mFAAE,wKACWC,MAAK,CAAC,0CAAD,CAA6C,CAClEC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAZ,CADN,CADyD,CAA7C,CADhB,QACDC,GADC,eAMDC,IANC,CAMMD,GAAG,CAACE,IAAJ,EANN,iCAOAD,IAPA,wDAAF,+EAFI,CAAD,CAJZ,0BACEA,IADF,CACQE,KADR,yBACgB,EADhB,gBAEEC,SAFF,WAEEA,SAFF,CAGEC,OAHF,WAGEA,OAHF,CAiBA,GAAID,SAAJ,CAAe,CACb,mBAAO,KAAC,gBAAD,IAAP,CACD,CAED,GAAME,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,EAAD,CAAQ,CAC9BZ,KAAK,0DAAmDY,EAAnD,EAAyD,CAC5DC,MAAM,CAAE,KADoD,CAE5DZ,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,oBAArB,CAAZ,CAFN,CAFmD,CAAzD,CAAL,CAOGU,IAPH,CAOQ,SAACT,GAAD,QAASA,IAAG,CAACE,IAAJ,EAAT,EAPR,EAQGO,IARH,CAQQ,SAACR,IAAD,CAAU,CACdS,OAAO,CAACC,GAAR,CAAYV,IAAZ,EACA,GAAIA,IAAI,CAACW,aAAL,CAAqB,CAAzB,CAA4B,CAC1BtB,KAAK,CAACuB,OAAN,CAAc,yBAAd,EACAR,OAAO,GACR,CACF,CAdH,EAeD,CAhBD,CAkBA,mBACE,aAAK,SAAS,CAAC,sBAAf,wBACE,YAAI,SAAS,CAAC,8CAAd,uBACY,GADZ,GADF,cAIE,YAAK,SAAS,CAAC,MAAf,UACGF,KAAK,CAACW,GAAN,CAAU,SAACC,IAAD,CAAOC,CAAP,qBACT,kCACE,aAAK,SAAS,CAAC,gIAAf,wBACE,mBAAIA,CAAC,CAAG,CAAR,EADF,cAEE,aAAK,SAAS,CAAC,iCAAf,wBACE,mBAAID,IAAI,CAACE,IAAT,EADF,cAEE,mBAAIF,IAAI,CAACG,KAAT,EAFF,GAFF,cAME,aAAK,SAAS,CAAC,wCAAf,wBACE,cAAO,QAAQ,CAAE,CAAjB,CAAoB,SAAS,CAAC,MAA9B,uBACE,YACE,KAAK,CAAC,4BADR,CAEE,IAAI,CAAC,MAFP,CAGE,OAAO,CAAC,WAHV,CAIE,WAAW,CAAE,GAJf,CAKE,MAAM,CAAC,cALT,CAME,SAAS,CAAC,SANZ,uBAQE,aACE,aAAa,CAAC,OADhB,CAEE,cAAc,CAAC,OAFjB,CAGE,CAAC,CAAC,kIAHJ,EARF,EADF,EADF,cAiBE,YACE,QAAQ,CAAE,CADZ,CAEE,SAAS,CAAC,+DAFZ,wBAIE,iCACE,eACE,OAAO,CAAE,yBAAMZ,gBAAe,CAACS,IAAI,CAACI,GAAN,CAArB,EADX,CAEE,SAAS,CAAC,YAFZ,UAIGJ,IAAI,CAACK,IAAL,GAAc,OAAd,CAAwB,OAAxB,CAAkC,YAJrC,EADF,EAJF,cAYE,iCACE,eAAQ,SAAS,CAAC,YAAlB,4BADF,EAZF,GAjBF,GANF,GADF,EAAUL,IAAI,CAACI,GAAf,CADS,EAAV,CADH,EAJF,GADF,CAsDD,CA9FD,CAgGA,cAAe3B,SAAf"},"metadata":{},"sourceType":"module"}