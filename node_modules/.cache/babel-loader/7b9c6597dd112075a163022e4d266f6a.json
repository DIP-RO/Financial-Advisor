{"ast":null,"code":"var _jsxFileName = \"F:\\\\sunshine-full-project\\\\agustine-hotel--main\\\\src\\\\Components\\\\Dashboard\\\\Bookings.js\",\n    _s = $RefreshSig$();\n\nimport { useQuery } from '@tanstack/react-query';\nimport React, { useContext, useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nimport { Link } from 'react-router-dom';\nimport { SyncLoader } from 'react-spinners';\nimport { AuthContext } from '../../Context/AuthContext/UserContext';\nimport BookedRoomCard from './BookedRoomCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Bookings = () => {\n  _s();\n\n  const {\n    user,\n    logOut\n  } = useContext(AuthContext);\n  const {\n    data: bookedRomm = [],\n    isLoading,\n    refetch\n  } = useQuery({\n    queryKey: ['bookedRoom', user === null || user === void 0 ? void 0 : user.email],\n    queryFn: async () => {\n      const res = await fetch(`https://hotel-web-server.vercel.app/bookings?email=${user === null || user === void 0 ? void 0 : user.email}`, {\n        headers: {\n          authorization: `bearer ${localStorage.getItem('agustineToken')}`\n        }\n      });\n\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      } else {\n        const data = await res.json();\n        console.log(res);\n        return data;\n      }\n    }\n  });\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center m-80\",\n      children: /*#__PURE__*/_jsxDEV(SyncLoader, {\n        color: \"hsla(86, 0%, 100%, 1)\",\n        size: 15\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 58\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 16\n    }, this);\n  }\n\n  const handleCancelBook = id => {\n    fetch(`https://hotel-web-server.vercel.app/orders/${id}`, {\n      method: 'DELETE'\n    }).then(res => {\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      }\n\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      if (data.deletedCount > 0) toast.error('You successFully Canceled Your Book');\n      refetch();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" text-center bg-gray-900 rounded-lg h-screen w-full z-0 drop-shadow-lg p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-3xl text-gray-200 font-bold my-4\",\n        children: \" Your Booking\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), bookedRomm.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"You Have not any booked Room Yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Book a \", /*#__PURE__*/_jsxDEV(Link, {\n            className: \"underline\",\n            to: \"/rooms\",\n            children: \"Room?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 39\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: bookedRomm.map(booked => /*#__PURE__*/_jsxDEV(BookedRoomCard, {\n          booked: booked,\n          handleCancelBook: handleCancelBook\n        }, booked._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 58\n        }, this))\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Bookings, \"ilomvSRgLHcF9PEGOIwzz9GFQ2E=\", false, function () {\n  return [useQuery];\n});\n\n_c = Bookings;\nexport default Bookings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bookings\");","map":{"version":3,"names":["useQuery","React","useContext","useEffect","useState","toast","Link","SyncLoader","AuthContext","BookedRoomCard","Bookings","user","logOut","data","bookedRomm","isLoading","refetch","queryKey","email","queryFn","res","fetch","headers","authorization","localStorage","getItem","status","json","console","log","handleCancelBook","id","method","then","deletedCount","error","length","map","booked","_id"],"sources":["F:/sunshine-full-project/agustine-hotel--main/src/Components/Dashboard/Bookings.js"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport React, { useContext, useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nimport { Link } from 'react-router-dom';\nimport { SyncLoader } from 'react-spinners';\nimport { AuthContext } from '../../Context/AuthContext/UserContext';\nimport BookedRoomCard from './BookedRoomCard';\n\nconst Bookings = () => {\n\n\n    const { user, logOut } = useContext(AuthContext)\n   \n\n    const { data: bookedRomm = [], isLoading, refetch } = useQuery({\n        queryKey: ['bookedRoom', user?.email],\n        queryFn: async () => {\n            const res = await fetch(`https://hotel-web-server.vercel.app/bookings?email=${user?.email}`, {\n                headers: {\n                    authorization: `bearer ${localStorage.getItem('agustineToken')}`\n                }\n            })\n            if (res.status === 401 || res.status === 403) {\n                    return logOut()\n                }\n       \n            else {\n                const data = await res.json()\n           \n                console.log(res)\n                return data;\n          }\n        }\n    })\n\n    if (isLoading) {\n        return <div className='flex justify-center m-80'><SyncLoader\n            color=\"hsla(86, 0%, 100%, 1)\"\n            size={15}\n        /></div>\n    }\n\n    const handleCancelBook = id => {\n        fetch(`https://hotel-web-server.vercel.app/orders/${id}`, {\n            method: 'DELETE',\n        })\n            .then(res => {\n                if (res.status === 401 || res.status === 403) {\n                    return logOut()\n                }\n                return res.json()\n\n            })\n            .then(data => {\n                console.log(data);\n                if (data.deletedCount > 0)\n                    toast.error('You successFully Canceled Your Book')\n                refetch()\n\n            })\n    }\n\n\n    return (\n        <div>\n            <div className=' text-center bg-gray-900 rounded-lg h-screen w-full z-0 drop-shadow-lg p-5'>\n                <h3 className='text-3xl text-gray-200 font-bold my-4'> Your Booking</h3>\n                {\n                    bookedRomm.length === 0 ?\n\n\n                        <div className='text-center'>\n                            <h1>You Have not any booked Room Yet.</h1>\n                            <p>Book a <Link className='underline' to='/rooms'>Room?</Link></p>\n                        </div>\n                        :\n                        <>\n                            {\n                                bookedRomm.map(booked => <BookedRoomCard\n\n                                    key={booked._id}\n                                    booked={booked}\n                                    handleCancelBook={handleCancelBook}\n                                ></BookedRoomCard>)\n                            }\n\n                        </>\n                }\n\n\n\n\n            </div>\n        </div>\n    );\n};\n\nexport default Bookings;"],"mappings":"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"},"metadata":{},"sourceType":"module"}